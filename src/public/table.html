<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="./tablescript.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" />

    <script>
    $(function() {

      function showCourses() {
        $("#courses").empty();
        $("#courses").append("Loading data ...");
        $.ajax({
          type: "GET",
          url: "courses",
          success: function(json) {
            if (!json.success) {
              alert(json.message);
            }
            else {
              $("#courses").empty();
              var rows = json.data;
              for (var i = 0; i < rows.length; i++) {
                $("#courses").append(rows[i].CourseCode + " - " + rows[i].CourseName + "<br>");
              }
            }
          },
          error: function (textStatus, errorThrown) {
            alert("Request failed!");
          }
        });
      }
      showCourses();

    $("#submit_id_button").click(function() {
     var myID = $("#myid").val();
     $.ajax({
       type: "POST",
       url: "submit_id",
       data: JSON.stringify({
        myID: myID
       }),
       success: function(json) {
<<<<<<< Updated upstream
         console.log("SubmitID return value: ")
         console.log(JSON.stringify(json));
=======
        // console.log("SubmitID return value: ")
        // console.log(JSON.stringify(json));
>>>>>>> Stashed changes
         if (!json.success) {
           alert(json.message);
         }
         else {
<<<<<<< Updated upstream
           // maketable(json.data);
=======
>>>>>>> Stashed changes
           displayTable(json);
         }
       },
       error: function (textStatus, errorThrown) {
         alert("Request failed!");
       }
     });
   });
<<<<<<< Updated upstream
      });
=======

   $("#remove_course_button").click(function() {
     var myCourseCode = $("#myCourseCode").val();
     var myID = $("#myid").val();
     $.ajax({
       type: "POST",
       url: "remove_course",
       data: JSON.stringify({
         myID: myID,
         myCourseCode: myCourseCode
       }),
       success: function(json) {
        console.log("RemoveCourseCode return value: ")
        console.log(JSON.stringify(json));
         if (!json.success) {
           alert(json.message);
         }
         else {
           alert("Please click the 'Submit ID' button to refresh your schedule!")
         }
       },
       error: function (textStatus, errorThrown) {
         alert("Request failed!");
       }
     });
   });
  });
>>>>>>> Stashed changes

     /* function submitID(){
            // Selecting the input element and get its value 
            var idVal = document.getElementById("myid").value;
            
            // Set session variable
            sessionStorage.setItem("submittedID", idVal);
            console.log(idVal);
                   
            
            // Displaying the value
            //alert(inputVal);
            console.log(idVal);
        } */

</script>
</head>

<body>
    <div class="landing-wrap">
        <div class="landing-html">

        <div class="dropdown">
            <button onclick="showDropdown()" class="dropbutton">Course list</button>
            <div id="courses" class="dropdown-content">
            </div>
          </div>         

          <div>
            <input type="text" id="myid" name="myid" placeholder="Enter your Student ID" required>
<<<<<<< Updated upstream
            <button id="submit_id_button">Submit ID</button>
=======
            <input type="text" id="myCourseCode" name="myCourseCode" placeholder="Enter a course code" >
            <button id="submit_id_button">Submit ID</button>
            <button id="remove_course_button">Remove Course</button>
>>>>>>> Stashed changes
          </div>

            <table id="classtable">

            </table>

        </div>
    </div>

    <div id="students_has_course_offering"> </div>

</body>
</html>